{"ast":null,"code":"import { APIService } from '@ohrm/core/util/services/api.service';\nimport { required } from '@/core/util/validation/rules';\nconst workWeekModel = {\n  monday: null,\n  tuesday: null,\n  wednesday: null,\n  thursday: null,\n  friday: null,\n  saturday: null,\n  sunday: null\n};\nexport default {\n  props: {\n    dayTypes: {\n      type: Array,\n      default: () => []\n    }\n  },\n  setup() {\n    const http = new APIService(window.appGlobal.baseUrl, '/api/v2/leave/workweek');\n    return {\n      http\n    };\n  },\n  data() {\n    return {\n      isLoading: false,\n      workWeek: {\n        ...workWeekModel\n      },\n      rules: {\n        monday: [required],\n        tuesday: [required],\n        wednesday: [required],\n        thursday: [required],\n        friday: [required],\n        saturday: [required],\n        sunday: [required]\n      }\n    };\n  },\n  beforeMount() {\n    this.isLoading = true;\n    this.http.request({\n      method: 'GET'\n    }).then(response => {\n      const {\n        data\n      } = response.data;\n      this.workWeek.monday = this.dayTypes.find(dayType => dayType.id === data.monday);\n      this.workWeek.tuesday = this.dayTypes.find(dayType => dayType.id === data.tuesday);\n      this.workWeek.wednesday = this.dayTypes.find(dayType => dayType.id === data.wednesday);\n      this.workWeek.thursday = this.dayTypes.find(dayType => dayType.id === data.thursday);\n      this.workWeek.friday = this.dayTypes.find(dayType => dayType.id === data.friday);\n      this.workWeek.saturday = this.dayTypes.find(dayType => dayType.id === data.saturday);\n      this.workWeek.sunday = this.dayTypes.find(dayType => dayType.id === data.sunday);\n    }).finally(() => {\n      this.isLoading = false;\n    });\n  },\n  methods: {\n    onSave() {\n      // check if workweek contains at least one working day\n      const noWorkingDays = Object.values(this.workWeek).find(dayType => dayType.id !== 8);\n      if (noWorkingDays === undefined) {\n        return this.$toast.warn({\n          title: this.$t('general.warning'),\n          message: this.$t('leave.at_least_one_day_should_be_a_working_day')\n        });\n      }\n      this.isLoading = true;\n      this.http.request({\n        method: 'PUT',\n        data: {\n          monday: this.workWeek.monday.id,\n          tuesday: this.workWeek.tuesday.id,\n          wednesday: this.workWeek.wednesday.id,\n          thursday: this.workWeek.thursday.id,\n          friday: this.workWeek.friday.id,\n          saturday: this.workWeek.saturday.id,\n          sunday: this.workWeek.sunday.id\n        }\n      }).then(() => {\n        this.$toast.saveSuccess();\n        this.isLoading = false;\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}