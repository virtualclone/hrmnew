{"ast":null,"code":"import { diffInTime } from '@ohrm/core/util/helper/datefns';\nimport { required, validTimeFormat, endTimeShouldBeAfterStartTime, startTimeShouldBeBeforeEndTime } from '@/core/util/validation/rules';\nimport TimeRange from '@/orangehrmLeavePlugin/components/TimeRange';\nexport default {\n  name: 'LeaveDurationInput',\n  components: {\n    'time-range': TimeRange\n  },\n  inheritAttrs: false,\n  props: {\n    duration: {\n      type: Object,\n      required: false,\n      default: () => null\n    },\n    fromTime: {\n      type: String,\n      required: false,\n      default: null\n    },\n    toTime: {\n      type: String,\n      required: false,\n      default: null\n    },\n    partial: {\n      type: Boolean,\n      default: false\n    },\n    workShift: {\n      type: Object,\n      required: true,\n      default: () => ({})\n    }\n  },\n  emits: ['update:fromTime', 'update:toTime', 'update:duration'],\n  data() {\n    return {\n      rules: {\n        duration: [required],\n        fromTime: [required, validTimeFormat, startTimeShouldBeBeforeEndTime(() => this.toTime, this.$t('general.from_time_should_be_before_to_time'))],\n        toTime: [required, validTimeFormat, endTimeShouldBeAfterStartTime(() => this.fromTime, this.$t('general.to_time_should_be_after_from_time')), value => {\n          if (value) {\n            const workLength = diffInTime(this.workShift.startTime, this.workShift.endTime);\n            const selectedLength = diffInTime(this.fromTime, value);\n            if (selectedLength > workLength) return this.$t('leave.duration_should_be_less_than_work_shift_length');\n          }\n          return true;\n        }]\n      }\n    };\n  },\n  computed: {\n    selectedTimeDuration() {\n      const timeDifference = diffInTime(this.fromTime, this.toTime);\n      return (timeDifference / 3600).toFixed(2);\n    },\n    options() {\n      const durations = [{\n        id: 1,\n        label: this.$t('leave.full_day'),\n        key: 'full_day'\n      }, {\n        id: 2,\n        label: this.$t('leave.half_day_morning'),\n        key: 'half_day_morning'\n      }, {\n        id: 3,\n        label: this.$t('leave.half_day_evening'),\n        key: 'half_day_afternoon'\n      }, {\n        id: 4,\n        label: this.$t('leave.specify_time'),\n        key: 'specify_time'\n      }];\n      return this.partial ? durations.filter(i => i.id != 1) : durations;\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}