{"ast":null,"code":"import { APIService } from '@/core/util/services/api.service';\nimport { required, digitsOnlyWithTwoDecimalPoints, maxCurrency } from '@ohrm/core/util/validation/rules';\nimport { maxValueShouldBeGreaterThanMinValue } from '@/core/util/validation/rules';\nconst payCurrencyModel = {\n  currencyId: null,\n  minSalary: '',\n  maxSalary: ''\n};\nexport default {\n  name: 'SavePayCurrency',\n  props: {\n    payGradeId: {\n      type: Number,\n      required: true\n    }\n  },\n  emits: ['close'],\n  setup(props) {\n    const http = new APIService(window.appGlobal.baseUrl, `/api/v2/admin/pay-grades/${props.payGradeId}/currencies`);\n    return {\n      http\n    };\n  },\n  data() {\n    return {\n      isLoading: false,\n      payCurrency: {\n        ...payCurrencyModel\n      },\n      currencies: [],\n      rules: {\n        currencyId: [required],\n        minSalary: [maxCurrency(1000000000), digitsOnlyWithTwoDecimalPoints],\n        maxSalary: [maxCurrency(1000000000), digitsOnlyWithTwoDecimalPoints, maxValueShouldBeGreaterThanMinValue(() => this.payCurrency.minSalary, this.$t('admin.should_be_higher_than_minimum_salary'))]\n      }\n    };\n  },\n  beforeMount() {\n    this.isLoading = true;\n    this.http.request({\n      method: 'GET',\n      url: `/api/v2/admin/pay-grades/${this.payGradeId}/currencies/allowed`,\n      params: {\n        limit: 0\n      }\n    }).then(response => {\n      const {\n        data\n      } = response.data;\n      this.currencies = data.map(item => {\n        return {\n          id: item.id,\n          label: item.id + ' - ' + item.name\n        };\n      });\n    }).finally(() => {\n      this.isLoading = false;\n    });\n  },\n  methods: {\n    onSave() {\n      this.isLoading = true;\n      this.http.create({\n        ...this.payCurrency,\n        currencyId: this.payCurrency.currencyId.id\n      }).then(() => {\n        return this.$toast.saveSuccess();\n      }).then(() => {\n        this.onCancel();\n      });\n    },\n    onCancel() {\n      this.$emit('close', true);\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}