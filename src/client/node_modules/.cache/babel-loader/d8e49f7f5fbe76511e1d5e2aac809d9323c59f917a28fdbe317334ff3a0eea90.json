{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { APIService } from '@/core/util/services/api.service';\nimport BaseWidget from '@/orangehrmDashboardPlugin/components/BaseWidget.vue';\nimport { OxdPieChart, CHART_COLORS } from '@ohrm/oxd';\nexport default {\n  name: 'EmployeeSubunitWidget',\n  components: {\n    'base-widget': BaseWidget,\n    'oxd-pie-chart': OxdPieChart\n  },\n  setup() {\n    const http = new APIService(window.appGlobal.baseUrl, '/api/v2/dashboard/employees/subunit');\n    return {\n      http\n    };\n  },\n  data() {\n    return {\n      dataset: [],\n      isLoading: false\n    };\n  },\n  beforeMount() {\n    this.isLoading = true;\n    this.http.getAll().then(response => {\n      const {\n        data,\n        meta\n      } = response.data;\n      const colors = [CHART_COLORS.COLOR_HEAT_WAVE, CHART_COLORS.COLOR_CHROME_YELLOW, CHART_COLORS.COLOR_YELLOW_GREEN, CHART_COLORS.COLOR_MOUNTAIN_MEADOW, CHART_COLORS.COLOR_PACIFIC_BLUE, CHART_COLORS.COLOR_BLEU_DE_FRANCE, CHART_COLORS.COLOR_MAJORELLE_BLUE, CHART_COLORS.COLOR_MEDIUM_ORCHID, CHART_COLORS.COLOR_FANDANGO_PINK];\n      this.dataset = data.map((item, index) => {\n        return item.count ? {\n          value: item.count,\n          color: colors[index],\n          label: item.subunit.name\n        } : false;\n      }).filter(item => item);\n      if (meta?.otherEmployeeCount) {\n        this.dataset.push({\n          value: meta.otherEmployeeCount,\n          color: CHART_COLORS.COLOR_FANDANGO_PINK,\n          label: this.$t('pim.other')\n        });\n      }\n      if (meta?.unassignedEmployeeCount) {\n        this.dataset.push({\n          value: meta.unassignedEmployeeCount,\n          color: CHART_COLORS.COLOR_TART_ORANGE,\n          label: this.$t('dashboard.unassigned')\n        });\n      }\n    }).finally(() => {\n      this.isLoading = false;\n    });\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}