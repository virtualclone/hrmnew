{"ast":null,"code":"import { APIService } from '@ohrm/core/util/services/api.service';\nimport ProfileImageInput from '@/orangehrmPimPlugin/components/ProfileImageInput';\nimport EditEmployeeLayout from '@/orangehrmPimPlugin/components/EditEmployeeLayout';\nimport { maxFileSize, required, validFileTypes } from '@/core/util/validation/rules';\nconst defaultPic = `${window.appGlobal.publicPath}/images/default-photo.png`;\nexport default {\n  components: {\n    'profile-image-input': ProfileImageInput,\n    'edit-employee-layout': EditEmployeeLayout\n  },\n  props: {\n    empNumber: {\n      type: String,\n      required: true\n    },\n    allowedImageTypes: {\n      type: Array,\n      required: true\n    }\n  },\n  setup(props) {\n    const http = new APIService(window.appGlobal.baseUrl, `/api/v2/pim/employees/${props.empNumber}/picture`);\n    return {\n      http\n    };\n  },\n  data() {\n    return {\n      isLoading: false,\n      empPicture: null,\n      rules: {\n        empPicture: [required, maxFileSize(1024 * 1024), validFileTypes(this.allowedImageTypes)]\n      }\n    };\n  },\n  computed: {\n    profilePicUrl() {\n      if (this.empPicture) {\n        const file = this.empPicture.base64;\n        const type = this.empPicture.type;\n        const isPicture = this.allowedImageTypes.findIndex(item => item === type);\n        return isPicture > -1 ? `data:${type};base64,${file}` : defaultPic;\n      } else {\n        return defaultPic;\n      }\n    }\n  },\n  methods: {\n    onSave() {\n      this.isLoading = true;\n      this.http.request({\n        method: 'PUT',\n        data: {\n          empPicture: this.empPicture\n        }\n      }).then(() => {\n        return this.$toast.updateSuccess();\n      }).then(() => {\n        location.reload();\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}