{"ast":null,"code":"import { required, shouldNotExceedCharLength } from '@ohrm/core/util/validation/rules';\nconst languageModel = {\n  name: '',\n  fluency: '',\n  competencyId: null,\n  comment: ''\n};\nexport default {\n  name: 'EditLanguage',\n  props: {\n    http: {\n      type: Object,\n      required: true\n    },\n    employeeId: {\n      type: String,\n      required: true\n    },\n    data: {\n      type: Object,\n      required: true\n    },\n    competencies: {\n      type: Array,\n      required: true\n    }\n  },\n  emits: ['close'],\n  data() {\n    return {\n      isLoading: false,\n      language: {\n        ...languageModel\n      },\n      rules: {\n        competencyId: [required],\n        comment: [shouldNotExceedCharLength(100)]\n      }\n    };\n  },\n  beforeMount() {\n    this.isLoading = true;\n    this.http.request({\n      method: 'GET',\n      url: `/api/v2/pim/employees/${this.employeeId}/languages/${this.data.languageId}/fluencies/${this.data.fluencyId}`\n    }).then(response => {\n      const {\n        data\n      } = response.data;\n      this.language.name = data.language.name;\n      this.language.fluency = data.fluency.name;\n      this.language.comment = data.comment ? data.comment : '';\n      this.language.competencyId = this.competencies.find(item => item.id === data.competency?.id);\n    }).finally(() => {\n      this.isLoading = false;\n    });\n  },\n  methods: {\n    onSave() {\n      this.isLoading = true;\n      this.http.request({\n        method: 'PUT',\n        url: `/api/v2/pim/employees/${this.employeeId}/languages/${this.data.languageId}/fluencies/${this.data.fluencyId}`,\n        data: {\n          competencyId: this.language.competencyId.id,\n          comment: this.language.comment\n        }\n      }).then(() => {\n        return this.$toast.updateSuccess();\n      }).then(() => {\n        this.onCancel();\n      });\n    },\n    onCancel() {\n      this.$emit('close', true);\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}