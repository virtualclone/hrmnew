{"ast":null,"code":"import { computed, ref } from 'vue';\nimport usei18n from '@/core/util/composable/usei18n';\nimport PhotoFrame from '@/orangehrmBuzzPlugin/components/PhotoFrame';\nimport { maxFileSize, validFileTypes } from '@/core/util/validation/rules';\nimport PhotoUploadArea from '@/orangehrmBuzzPlugin/components/PhotoUploadArea';\nimport { OxdAlert } from '@ohrm/oxd';\nexport default {\n  name: 'PhotoInput',\n  components: {\n    'oxd-alert': OxdAlert,\n    'photo-frame': PhotoFrame,\n    'photo-upload-area': PhotoUploadArea\n  },\n  props: {\n    modelValue: {\n      type: Array,\n      required: true\n    }\n  },\n  emits: ['update:modelValue'],\n  setup(props, context) {\n    const {\n      $t\n    } = usei18n();\n    const validationMessage = ref('');\n    const fileTypeValidator = validFileTypes(['image/gif', 'image/jpeg', 'image/jpg', 'image/pjpeg', 'image/png', 'image/x-png']);\n    const fileSizeValidator = maxFileSize(1024 * 1024 * 2);\n    const onFileChange = $file => {\n      if (!$file) return;\n      validationMessage.value = '';\n      if (fileSizeValidator($file) !== true) {\n        return validationMessage.value = $t('buzz.file_size_validation_message');\n      }\n      if (fileTypeValidator($file) !== true) {\n        return validationMessage.value = $t('buzz.file_type_validation_message');\n      }\n      context.emit('update:modelValue', [...(props.modelValue || []), $file]);\n    };\n    const onClickRemove = index => {\n      validationMessage.value = '';\n      context.emit('update:modelValue', (props.modelValue || []).filter((_, i) => index !== i));\n    };\n    const onClickCloseAlert = () => {\n      validationMessage.value = '';\n    };\n    const showUploadArea = computed(() => Array.isArray(props.modelValue) && props.modelValue.length < 1);\n    const showUploadButton = computed(() => Array.isArray(props.modelValue) && props.modelValue.length > 0 && props.modelValue.length < 5);\n    return {\n      onFileChange,\n      onClickRemove,\n      showUploadArea,\n      showUploadButton,\n      onClickCloseAlert,\n      validationMessage\n    };\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}