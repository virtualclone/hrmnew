{"ast":null,"code":"import { computed, ref } from 'vue';\nimport { required, validSelection } from '@/core/util/validation/rules';\nimport ReportsTable from '@/core/components/table/ReportsTable';\nimport JobtitleDropdown from '@/orangehrmPimPlugin/components/JobtitleDropdown';\nimport EmployeeAutocomplete from '@/core/components/inputs/EmployeeAutocomplete';\nimport LeaveTypeDropdown from '@/orangehrmLeavePlugin/components/LeaveTypeDropdown';\nimport LeavePeriodDropdown from '@/orangehrmLeavePlugin/components/LeavePeriodDropdown';\nimport { OxdSwitchInput } from '@ohrm/oxd';\nconst defaultFilters = {\n  type: 'leave_type_leave_entitlements_and_usage',\n  employee: null,\n  leavePeriod: null,\n  leaveType: null,\n  subunit: null,\n  location: null,\n  jobTitle: null,\n  includePastEmps: false\n};\nexport default {\n  components: {\n    'reports-table': ReportsTable,\n    'oxd-switch-input': OxdSwitchInput,\n    'jobtitle-dropdown': JobtitleDropdown,\n    'leave-type-dropdown': LeaveTypeDropdown,\n    'leave-period-dropdown': LeavePeriodDropdown,\n    'employee-autocomplete': EmployeeAutocomplete\n  },\n  props: {\n    locations: {\n      type: Array,\n      default: () => []\n    },\n    subunits: {\n      type: Array,\n      default: () => []\n    },\n    leavePeriod: {\n      type: Object,\n      required: false,\n      default: () => null\n    }\n  },\n  setup(props) {\n    const filters = ref({\n      ...defaultFilters,\n      ...(props.leavePeriod && {\n        leavePeriod: props.leavePeriod\n      })\n    });\n    const rules = ref({\n      employee: [required, validSelection],\n      leavePeriod: [required],\n      leaveType: [required]\n    });\n    const serializedFilters = computed(() => {\n      if (filters.value.type === 'leave_type_leave_entitlements_and_usage') {\n        return {\n          name: filters.value.type,\n          fromDate: filters.value.leavePeriod?.startDate,\n          toDate: filters.value.leavePeriod?.endDate,\n          subunitId: filters.value.subunit?.id,\n          leaveTypeId: filters.value.leaveType?.id,\n          locationId: filters.value.location?.id,\n          jobTitleId: filters.value.jobTitle?.id,\n          includeEmployees: filters.value.includePastEmps ? 'currentAndPast' : 'onlyCurrent'\n        };\n      } else {\n        return {\n          name: filters.value.type,\n          empNumber: filters.value.employee?.id,\n          fromDate: filters.value.leavePeriod?.startDate,\n          toDate: filters.value.leavePeriod?.endDate\n        };\n      }\n    });\n    return {\n      rules,\n      filters,\n      serializedFilters\n    };\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}