{"ast":null,"code":"import usePaginate from '@ohrm/core/util/composable/usePaginate';\nimport { APIService } from '@/core/util/services/api.service';\nimport { navigate } from '@ohrm/core/util/helper/navigation';\nimport usei18n from '@/core/util/composable/usei18n';\nimport useDateFormat from '@/core/util/composable/useDateFormat';\nimport { formatDate, parseDate } from '@/core/util/helper/datefns';\nimport useLocale from '@/core/util/composable/useLocale';\nexport default {\n  name: 'TimesheetPendingActions',\n  setup() {\n    const http = new APIService(window.appGlobal.baseUrl, '/api/v2/time/employees/timesheets/list');\n    const {\n      $t\n    } = usei18n();\n    const {\n      jsDateFormat\n    } = useDateFormat();\n    const {\n      locale\n    } = useLocale();\n    const actionsNormalizer = data => {\n      return data.map(item => {\n        const startDate = formatDate(parseDate(item.startDate), jsDateFormat, {\n          locale\n        });\n        const endDate = formatDate(parseDate(item.endDate), jsDateFormat, {\n          locale\n        });\n        const empName = `${item.employee?.firstName} ${item.employee?.middleName} ${item.employee?.lastName}`;\n        if (item.employee?.terminationId) {\n          empName + ` (${$t('general.past_employee')})`;\n        }\n        return {\n          id: item.id,\n          startDate: item.startDate,\n          empNumber: item.employee.empNumber,\n          period: `${startDate} - ${endDate}`,\n          employee: empName\n        };\n      });\n    };\n    const {\n      showPaginator,\n      currentPage,\n      total,\n      pages,\n      pageSize,\n      response,\n      isLoading,\n      execQuery\n    } = usePaginate(http, {\n      normalizer: actionsNormalizer\n    });\n    return {\n      http,\n      showPaginator,\n      currentPage,\n      isLoading,\n      total,\n      pages,\n      pageSize,\n      execQuery,\n      items: response\n    };\n  },\n  data() {\n    return {\n      headers: [{\n        name: 'employee',\n        slot: 'title',\n        title: this.$t('general.employee_name'),\n        style: {\n          flex: '40%'\n        }\n      }, {\n        name: 'period',\n        title: this.$t('time.timesheet_period'),\n        style: {\n          flex: '40%'\n        }\n      }, {\n        name: 'actions',\n        slot: 'footer',\n        title: this.$t('general.actions'),\n        style: {\n          flex: '20%'\n        },\n        cellType: 'oxd-table-cell-actions',\n        cellConfig: {\n          view: {\n            onClick: this.onClickView,\n            component: 'oxd-button',\n            props: {\n              label: this.$t('general.view'),\n              displayType: 'text',\n              size: 'medium'\n            }\n          }\n        }\n      }]\n    };\n  },\n  methods: {\n    onClickView(item) {\n      navigate('/time/viewTimesheet/employeeId/{empNumber}', {\n        empNumber: item.empNumber\n      }, {\n        startDate: item.startDate\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}