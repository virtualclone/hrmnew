{"ast":null,"code":"import { ref } from 'vue';\nimport { OxdBuzzPostInput, OxdGlassButton, OxdSheet } from '@ohrm/oxd';\nimport useToast from '@/core/util/composable/useToast';\nimport { APIService } from '@/core/util/services/api.service';\nimport { shouldNotExceedCharLength } from '@/core/util/validation/rules';\nimport ProfileImage from '@/orangehrmBuzzPlugin/components/ProfileImage';\nimport ShareVideoModal from '@/orangehrmBuzzPlugin/components/ShareVideoModal';\nimport SharePhotoModal from '@/orangehrmBuzzPlugin/components/SharePhotoModal';\nexport default {\n  name: 'CreatePost',\n  components: {\n    'oxd-sheet': OxdSheet,\n    'profile-image': ProfileImage,\n    'oxd-glass-button': OxdGlassButton,\n    'oxd-buzz-post-input': OxdBuzzPostInput,\n    'share-video-modal': ShareVideoModal,\n    'share-photo-modal': SharePhotoModal\n  },\n  props: {\n    employee: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: ['refresh'],\n  setup(_, context) {\n    const post = ref(null);\n    const {\n      saveSuccess\n    } = useToast();\n    const showVideoModal = ref(false);\n    const showPhotoModal = ref(false);\n    const rules = [shouldNotExceedCharLength(65530)];\n    const http = new APIService(window.appGlobal.baseUrl, '/api/v2/buzz/posts');\n    const onSubmit = () => {\n      if (post.value === null || String(post.value).trim() === '') return;\n      http.create({\n        type: 'text',\n        text: post.value\n      }).then(() => {\n        saveSuccess();\n        post.value = null;\n        context.emit('refresh');\n      });\n    };\n    const onClickSharePhotos = () => {\n      showPhotoModal.value = true;\n    };\n    const onClickShareVideos = () => {\n      showVideoModal.value = true;\n    };\n    const onCloseVideoModal = $event => {\n      showVideoModal.value = false;\n      if ($event) {\n        saveSuccess();\n        context.emit('refresh');\n      }\n    };\n    const onClosePhotoModal = $event => {\n      showPhotoModal.value = false;\n      if ($event) {\n        saveSuccess();\n        context.emit('refresh');\n      }\n    };\n    return {\n      post,\n      rules,\n      onSubmit,\n      showVideoModal,\n      showPhotoModal,\n      onCloseVideoModal,\n      onClosePhotoModal,\n      onClickSharePhotos,\n      onClickShareVideos\n    };\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}