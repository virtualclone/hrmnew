{"ast":null,"code":"import { required, shouldNotExceedCharLength, validSelection } from '@/core/util/validation/rules';\nimport { APIService } from '@ohrm/core/util/services/api.service';\nimport { navigate } from '@ohrm/core/util/helper/navigation';\nimport ClaimEventDropdownVue from '@/orangehrmClaimPlugin/components/ClaimEventDropdown.vue';\nimport ClaimEmployeeAutocomplete from '@/orangehrmClaimPlugin/components/ClaimEmployeeAutocomplete.vue';\nimport { ref } from 'vue';\nconst claimRequest = {\n  event: null,\n  currency: null,\n  remarks: null\n};\nexport default {\n  name: 'AssignClaimRequest',\n  components: {\n    'claim-event-dropdown': ClaimEventDropdownVue,\n    'claim-employee-autocomplete': ClaimEmployeeAutocomplete\n  },\n  props: {\n    currencies: {\n      type: Array,\n      default: () => []\n    },\n    authEmployeeNumber: {\n      type: Number,\n      required: true\n    }\n  },\n  setup() {\n    const employee = ref(null);\n    return {\n      employee\n    };\n  },\n  data() {\n    return {\n      isLoading: false,\n      request: {\n        ...claimRequest\n      },\n      id: 0,\n      rules: {\n        employee: [required, validSelection],\n        event: [required],\n        currency: [required],\n        remarks: [shouldNotExceedCharLength(1000)]\n      }\n    };\n  },\n  methods: {\n    onCancel() {\n      navigate('/claim/viewAssignClaim');\n    },\n    onSave() {\n      this.isLoading = true;\n      const http = new APIService(window.appGlobal.baseUrl, `/api/v2/claim/employees/${this.employee.id}/requests`);\n      http.create({\n        claimEventId: this.request.event.id,\n        currencyId: this.request.currency.id,\n        remarks: this.request.remarks\n      }).then(res => {\n        this.id = res.data.data.id;\n        return this.$toast.saveSuccess();\n      }).then(() => {\n        navigate('/claim/assignClaim/id/{id}', {\n          id: this.id\n        });\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}