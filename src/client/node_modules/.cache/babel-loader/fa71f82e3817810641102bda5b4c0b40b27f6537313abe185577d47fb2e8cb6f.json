{"ast":null,"code":"import { navigate } from '@/core/util/helper/navigation';\nimport { APIService } from '@/core/util/services/api.service';\nimport SelectedEmployee from '@/orangehrmMaintenancePlugin/components/SelectedEmployee';\nimport EmployeeRecords from '@/orangehrmMaintenancePlugin/components/EmployeeRecords';\nimport ConfirmationDialog from '@/core/components/dialogs/ConfirmationDialog';\nimport MaintenanceNote from '@/orangehrmMaintenancePlugin/components/MaintenanceNote';\nconst selectedEmployeeModel = {\n  firstName: '',\n  middleName: '',\n  lastName: '',\n  employeeId: '',\n  empNumber: ''\n};\nexport default {\n  name: 'PurgeEmployee',\n  components: {\n    'purge-confirmation': ConfirmationDialog,\n    'purge-employee-records': EmployeeRecords,\n    'selected-employee': SelectedEmployee,\n    'maintenance-note': MaintenanceNote\n  },\n  props: {\n    instanceIdentifier: {\n      type: String,\n      default: null\n    }\n  },\n  setup() {\n    const http = new APIService(window.appGlobal.baseUrl, '/api/v2/maintenance/purge');\n    return {\n      http\n    };\n  },\n  data() {\n    return {\n      isLoading: false,\n      showPurgeableEmployee: false,\n      selectedEmployee: {\n        ...selectedEmployeeModel\n      }\n    };\n  },\n  methods: {\n    onClickSearch(employee) {\n      this.selectedEmployee = {\n        ...selectedEmployeeModel\n      };\n      if (employee) {\n        this.selectedEmployee = {\n          ...employee\n        };\n        this.showPurgeableEmployee = true;\n      } else {\n        this.showPurgeableEmployee = false;\n      }\n    },\n    onClickPurge(empNumber) {\n      this.$refs.purgeDialog.showDialog().then(confirmation => {\n        if (confirmation === 'ok') {\n          this.purgeEmployee(empNumber);\n        }\n      });\n    },\n    purgeEmployee(empNumber) {\n      this.isLoading = true;\n      this.http.deleteAll({\n        empNumber: empNumber\n      }).then(() => {\n        return this.$toast.success({\n          title: this.$t('general.success'),\n          message: this.$t('maintenance.purge_success')\n        });\n      }).then(() => {\n        this.showPurgeableEmployee = false;\n        this.selectedEmployee = {\n          ...selectedEmployeeModel\n        };\n        this.isLoading = false;\n        navigate('/maintenance/purgeEmployee');\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}