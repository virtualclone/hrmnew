{"ast":null,"code":"import { ref, onBeforeMount, watch } from 'vue';\nimport { APIService } from '@ohrm/core/util/services/api.service';\nexport default {\n  name: 'ProjectDropdown',\n  // inheritAttrs: false,\n  props: {\n    customerId: {\n      required: true,\n      default: null\n    }\n  },\n  setup(props) {\n    const options = ref([]);\n    const http = new APIService(window.appGlobal.baseUrl, '/api/v2/time/projects');\n    watch(() => props.customerId, async newCustomerId => {\n      if (newCustomerId !== null) {\n        http.getAll({\n          customerId: newCustomerId,\n          status: 1\n        }).then(({\n          data\n        }) => {\n          options.value = data.data.map(project => ({\n            id: project.id,\n            label: project.name\n          }));\n          // console.log(options);\n        });\n        // console.log(\"after if\",this.options)\n      }\n    });\n\n    onBeforeMount(() => {\n      http.getAll({\n        status: 1,\n        limit: 0\n      }).then(({\n        data\n      }) => {\n        options.value = data.data.map(project => {\n          return {\n            id: project.id,\n            label: project.name\n          };\n        });\n      });\n    });\n    return {\n      options\n    };\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}