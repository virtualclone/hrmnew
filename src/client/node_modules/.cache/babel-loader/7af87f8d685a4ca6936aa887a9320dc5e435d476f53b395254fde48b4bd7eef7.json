{"ast":null,"code":"import { required, shouldNotExceedCharLength } from '@/core/util/validation/rules';\nimport { APIService } from '@ohrm/core/util/services/api.service';\nimport { navigate } from '@ohrm/core/util/helper/navigation';\nimport ClaimEventDropdownVue from '../../components/ClaimEventDropdown.vue';\nconst claimRequest = {\n  event: null,\n  currency: null,\n  remarks: null\n};\nexport default {\n  name: 'SubmitClaimRequest',\n  components: {\n    'claim-event-dropdown': ClaimEventDropdownVue\n  },\n  props: {\n    currencies: {\n      type: Array,\n      default: () => []\n    }\n  },\n  setup() {\n    const http = new APIService(window.appGlobal.baseUrl, '/api/v2/claim/requests');\n    return {\n      http\n    };\n  },\n  data() {\n    return {\n      isLoading: false,\n      request: {\n        ...claimRequest\n      },\n      id: 0,\n      rules: {\n        event: [required],\n        currency: [required],\n        remarks: [shouldNotExceedCharLength(1000)]\n      }\n    };\n  },\n  methods: {\n    onCancel() {\n      navigate('/claim/viewClaim');\n    },\n    onSave() {\n      this.isLoading = true;\n      this.http.create({\n        claimEventId: this.request.event.id,\n        currencyId: this.request.currency.id,\n        remarks: this.request.remarks\n      }).then(res => {\n        this.id = res.data.data.id;\n        return this.$toast.saveSuccess();\n      }).then(() => {\n        navigate('/claim/submitClaim/id/{id}', {\n          id: this.id\n        });\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}