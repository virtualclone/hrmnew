{"ast":null,"code":"import { required, maxFileSize, validFileTypes } from '@/core/util/validation/rules';\nimport useForm from '@ohrm/core/util/composable/useForm';\nimport { APIService } from '@/core/util/services/api.service';\nimport EmployeeDataImportModal from '@/orangehrmPimPlugin/components/EmployeeDataImportModal';\nconst attachmentModel = {\n  attachment: null\n};\nexport default {\n  components: {\n    'employee-data-import-modal': EmployeeDataImportModal\n  },\n  props: {\n    allowedFileTypes: {\n      type: Array,\n      required: true\n    }\n  },\n  setup() {\n    const http = new APIService(window.appGlobal.baseUrl, `/api/v2/pim/csv-import`);\n    const {\n      formRef,\n      reset\n    } = useForm();\n    return {\n      http,\n      reset,\n      formRef\n    };\n  },\n  data() {\n    return {\n      isLoading: false,\n      attachment: {\n        ...attachmentModel\n      },\n      rules: {\n        attachment: [required, maxFileSize(1048576), validFileTypes(this.allowedFileTypes)]\n      },\n      importModalState: null\n    };\n  },\n  methods: {\n    onSave() {\n      this.isLoading = true;\n      this.http.create({\n        ...this.attachment\n      }).then(response => {\n        const {\n          meta\n        } = response.data;\n        this.importModalState = meta;\n      }).finally(() => {\n        this.reset();\n        this.isLoading = false;\n      });\n    },\n    onClickDownload() {\n      const downUrl = `${window.appGlobal.baseUrl}/pim/sampleCsvDownload`;\n      window.open(downUrl, '_blank');\n    },\n    onImportModalClose() {\n      this.importModalState = null;\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}